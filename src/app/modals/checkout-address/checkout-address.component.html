<app-modal-header title="Dirección de envío" (onReturn)="returnCart()" (onClose)="closeModal()"></app-modal-header>
<div class="modal-body scrollbar-primary">
  <ng-container *ngIf="!loadingList">
    <div class="px-2 py-2 mx-2">
      <app-checkout-address-item *ngFor="let address of addresses; let i = index" [address]="address" [position]="i" (onClick)="changeChecked($event)"></app-checkout-address-item>
    </div>
    <div class="px-2 py-2 mx-2 d-flex justify-content-center" *ngIf="addresses.length == 0">
      <label class="my-0 red-text h5" >No tiene direcciones agregadas.</label>
    </div>
    <div class="px-2 py-2 mx-2">
      <app-button class="w-100 d-flex" [size]="100" [label]="'Agregar nueva dirección'" [color]="'primary-outline'" [rounded]="true" [hoverable]="false" (onClick)="addNewAddress()"></app-button>
    </div>
  </ng-container>
  <ng-container *ngIf="loadingList">
    <app-modal-loading class="w-100 py-2 d-flex mx-2 justify-content-center"></app-modal-loading>
  </ng-container>
</div>
<div class="modal-footer">
  <div class="d-flex flex-column flex-grow-1 px-2 py-2 mx-2">
    <div class="d-flex w-100 my-2">
    </div>
    <div class="d-flex justify-content-between" *ngIf="selectedAddress && selectedAddress.amount_delivery > 0">
      <label class="h5 font-size-2">Precio delivery</label>
      <label class="h5 font-size-2">{{ selectedAddress.amount_delivery || 0 | currency: 'S/'}}</label>
    </div>
    <div class="d-flex justify-content-center" *ngIf="selectedAddress && selectedAddress.amount_delivery <= 0">
      <label class="h5 font-size-2 red-text text-center">Uno o más productos sin delivery.<br>Continuar para más detalle.</label>
    </div>
    <div class="d-flex justify-content-between">
      <label class="h5 red-text font-size-2"><strong>Subtotal precio Scotiabank</strong></label>
      <label class="h5 red-text font-size-2"><strong>{{ subtotal + ( selectedAddress && selectedAddress.amount_delivery > 0? selectedAddress.amount_delivery : 0 ) | currency: 'S/'}}</strong></label>
    </div>
    <div class="d-flex justify-content-between mb-1">
      <label class="grey-dark-text font-size-1">Subtotal precio regular</label>
      <label class="grey-dark-text font-size-1"><del>{{ regularSubtotal + ( selectedAddress && selectedAddress.amount_delivery > 0? selectedAddress.amount_delivery : 0 ) | currency: 'S/'}}</del></label>
    </div>
    <app-checkout-bottom-info></app-checkout-bottom-info>
  </div>
  <div class="d-flex flex-row justify-content-between align-items-center w-100">
    <div class="d-none d-lg-none pl-2" (click)="toggleInfo()">
      <mdb-icon fas icon="info-circle" class="red-text" size="2x"></mdb-icon>
    </div>
    <app-button *ngIf="!loadingNext" class="w-100 d-flex mx-2" [size]="100" [label]="'Continuar'" [bold]="true" additionalClasses="py-2" [textSize]="2" [rounded]="true" [hoverable]="false" [disabled]="!selectedAddress" (onClick)="checkoutSummary()"></app-button>
  </div>
  <app-modal-loading class="w-100 py-1 d-flex mx-2 justify-content-center" *ngIf="loadingNext"></app-modal-loading>
</div>
